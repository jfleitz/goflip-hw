SHELL = cmd.exe

#
# ZDS II Make File - switchMatrix project, Debug configuration
#
# Generated by: ZDS II - Z8 Encore! Family 5.2.0 (Build 14011704)
#   IDE component: d:5.2.0:13120401
#   Install Path: C:\Program Files (x86)\ZiLOG\ZDSII_Z8Encore!_5.2.0\
#

RM = del

ZDS = C:\PROGRA~2\ZiLOG\ZDSII_~1.0
BIN = $(ZDS)\bin
# ZDS include base directory
INCLUDE = C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include
# intermediate files directory
WORKDIR = X:\ePin\source\SwitchMatrix

CC = @$(BIN)\eZ8cc
AS = @$(BIN)\eZ8asm
LD = @$(BIN)\eZ8link
AR = @$(BIN)\eZ8lib

CFLAGS =  \
-bfpack:compatible -NOfastcall -const:ROM -define:_Z8F0822  \
-define:_Z8ENCORE_XP_F0822_SERIES -define:_ZSL_DEVICE_PORTA  \
-define:_ZSL_PORT_USED -define:_ZSL_DEVICE_PORTB  \
-define:_ZSL_DEVICE_PORTC -define:_MODEL_SMALL  \
-define:_Z8ENCORE_F08X -genprintf -keepasm -keeplst -list  \
-listinc -model:S -optlink -promote -regvar:8 -NOreduceopt  \
-stdinc:"C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\std;C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\zilog;C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\zilog\Z8ENCO~3;$(INCLUDE)\zilog"  \
-usrinc:"include" -expmac -debug -NOrevaa -cpu:Z8F0822  \
-asmsw:"   \
	-define:_Z8F0822=1 -define:_Z8ENCORE_640_FAMILY=1  \
	-define:_Z8ENCORE_F640X=1 -define:_Z8ENCORE_XP_F0822_SERIES=1  \
	-define:_ZSL_DEVICE_PORTA=1 -define:_ZSL_PORT_USED=1  \
	-define:_ZSL_DEVICE_PORTB=1 -define:_ZSL_DEVICE_PORTC=1  \
	-define:_MODEL_SMALL=1 -define:_Z8ENCORE_F08X=1  \
	-include:"C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\std;C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\zilog;C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\zilog\Z8ENCO~3"  \
	-list -NOlistmac -pagelen:56 -pagewidth:80 -quiet -sdiopt -warn  \
	-debug -NOigcase -NOrevaa -cpu:Z8F0822"

ASFLAGS =  \
-define:_Z8F0822=1 -define:_Z8ENCORE_640_FAMILY=1  \
-define:_Z8ENCORE_F640X=1 -define:_Z8ENCORE_XP_F0822_SERIES=1  \
-define:_ZSL_DEVICE_PORTA=1 -define:_ZSL_PORT_USED=1  \
-define:_ZSL_DEVICE_PORTB=1 -define:_ZSL_DEVICE_PORTC=1  \
-define:_MODEL_SMALL=1 -define:_Z8ENCORE_F08X=1  \
-include:"C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\std;C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\zilog;C:\PROGRA~2\ZiLOG\ZDSII_~1.0\include\zilog\Z8ENCO~3"  \
-list -NOlistmac -name -pagelen:56 -pagewidth:80 -quiet -sdiopt  \
-warn -debug -NOigcase -NOrevaa -cpu:Z8F0822

LDFLAGS = @.\switchMatrix_Debug.linkcmd
OUTDIR = X:\ePin\source\SwitchMatrix

build: switchMatrix

buildall: clean switchMatrix

relink: deltarget switchMatrix

deltarget: 
	@if exist $(WORKDIR)\switchMatrix.lod  \
            $(RM) $(WORKDIR)\switchMatrix.lod
	@if exist $(WORKDIR)\switchMatrix.map  \
            $(RM) $(WORKDIR)\switchMatrix.map

clean: 
	@if exist $(WORKDIR)\switchMatrix.lod  \
            $(RM) $(WORKDIR)\switchMatrix.lod
	@if exist $(WORKDIR)\switchMatrix.map  \
            $(RM) $(WORKDIR)\switchMatrix.map
	@if exist $(WORKDIR)\zsldevinit.obj  \
            $(RM) $(WORKDIR)\zsldevinit.obj
	@if exist $(WORKDIR)\switchMatrix.obj  \
            $(RM) $(WORKDIR)\switchMatrix.obj
	@if exist $(WORKDIR)\spibase.obj  \
            $(RM) $(WORKDIR)\spibase.obj
	@if exist $(WORKDIR)\sysclk.obj  \
            $(RM) $(WORKDIR)\sysclk.obj
	@if exist $(WORKDIR)\timer.obj  \
            $(RM) $(WORKDIR)\timer.obj

# pre-4.11.0 compatibility
rebuildall: buildall 

LIBS = 

OBJS =  \
            $(WORKDIR)\zsldevinit.obj  \
            $(WORKDIR)\switchMatrix.obj  \
            $(WORKDIR)\spibase.obj  \
            $(WORKDIR)\sysclk.obj  \
            $(WORKDIR)\timer.obj

switchMatrix: $(OBJS)
	 $(LD) $(LDFLAGS)

$(WORKDIR)\zsldevinit.obj :  \
            X:\ePin\source\SwitchMatrix\zsldevinit.asm  \
            $(INCLUDE)\zilog\ez8dev.inc  \
            $(INCLUDE)\zilog\gpio.inc
	 $(AS) $(ASFLAGS) X:\ePin\source\SwitchMatrix\zsldevinit.asm

$(WORKDIR)\switchMatrix.obj :  \
            X:\ePin\source\SwitchMatrix\switchMatrix.c  \
            $(INCLUDE)\std\STDARG.H  \
            $(INCLUDE)\zilog\Zconst.h  \
            $(INCLUDE)\zilog\defines.h  \
            $(INCLUDE)\zilog\dmadefs.h  \
            $(INCLUDE)\zilog\gpio.h  \
            $(INCLUDE)\zilog\uart.h  \
            $(INCLUDE)\zilog\uartdefs.h  \
            $(INCLUDE)\std\STDARG.H  \
            $(INCLUDE)\std\STDIO.H  \
            $(INCLUDE)\zilog\FORMAT.H  \
            $(INCLUDE)\zilog\Zconst.h  \
            $(INCLUDE)\zilog\ez8.h  \
            X:\ePin\source\SwitchMatrix\include\spibase.h  \
            X:\ePin\source\SwitchMatrix\include\switchmatrix.h  \
            X:\ePin\source\SwitchMatrix\include\sysclk.h  \
            X:\ePin\source\SwitchMatrix\include\timer.h
	 $(CC) $(CFLAGS) X:\ePin\source\SwitchMatrix\switchMatrix.c

$(WORKDIR)\spibase.obj :  \
            X:\ePin\source\SwitchMatrix\spibase.c  \
            $(INCLUDE)\zilog\defines.h  \
            $(INCLUDE)\zilog\dmadefs.h  \
            $(INCLUDE)\zilog\gpio.h  \
            $(INCLUDE)\zilog\uart.h  \
            $(INCLUDE)\zilog\uartdefs.h  \
            $(INCLUDE)\zilog\defines.h  \
            $(INCLUDE)\zilog\ez8.h  \
            X:\ePin\source\SwitchMatrix\include\spibase.h
	 $(CC) $(CFLAGS) X:\ePin\source\SwitchMatrix\spibase.c

$(WORKDIR)\sysclk.obj :  \
            X:\ePin\source\SwitchMatrix\sysclk.c  \
            $(INCLUDE)\zilog\defines.h  \
            $(INCLUDE)\zilog\dmadefs.h  \
            $(INCLUDE)\zilog\gpio.h  \
            $(INCLUDE)\zilog\uart.h  \
            $(INCLUDE)\zilog\uartdefs.h  \
            $(INCLUDE)\zilog\ez8.h  \
            X:\ePin\source\SwitchMatrix\include\sysclk.h
	 $(CC) $(CFLAGS) X:\ePin\source\SwitchMatrix\sysclk.c

$(WORKDIR)\timer.obj :  \
            X:\ePin\source\SwitchMatrix\timer.c  \
            $(INCLUDE)\std\STDARG.H  \
            $(INCLUDE)\zilog\Zconst.h  \
            $(INCLUDE)\zilog\defines.h  \
            $(INCLUDE)\zilog\dmadefs.h  \
            $(INCLUDE)\zilog\ez8.h  \
            $(INCLUDE)\zilog\gpio.h  \
            $(INCLUDE)\zilog\uart.h  \
            $(INCLUDE)\zilog\uartdefs.h  \
            $(INCLUDE)\std\STDARG.H  \
            $(INCLUDE)\std\STDIO.H  \
            $(INCLUDE)\zilog\FORMAT.H  \
            $(INCLUDE)\zilog\SIO.H  \
            $(INCLUDE)\zilog\Zconst.h  \
            $(INCLUDE)\zilog\ez8.h  \
            X:\ePin\source\SwitchMatrix\include\switchmatrix.h  \
            X:\ePin\source\SwitchMatrix\include\timer.h
	 $(CC) $(CFLAGS) X:\ePin\source\SwitchMatrix\timer.c

